# Отчёт по домашнему заданию №5

## Описание

В данной работе реализована лента новостей. Лента формируется на основе постов друзей.
Пользователь считается подписанным на другого пользователя, если он у него состоит в друзьях.
За посты и формирование ленты отвечает микросервис post. При добавлении нового поста он добаляется всем друзьям в ленту.
В ленте хранятся последние 1000 постов. Формирование лент происходит асинхронно по событию.
Асинхронная обработка выполнени на основе очереди, в качестве брокера сообщений использован RabbitMQ.
Ленты новостей получаются из кеша, для хранения данных в кеше используется redis.
При добавлении нового поста кеши пользователей инвалидируются.
При получении ленты новостей данные получаются из кеша, в случае, если в кеше данных нет, то данные получаются из базы, а затем добавляются в кеш.
Также стоит отметить, что для хранения подписчиков (друзей) в микросервисе post используется проекция данных таблицы user_friend микросервиса user.
Проекция формируется асинхронно с использованием шины доменных событий.

За работу с кешом отвечает NewsLineCache.
За обработку сообщений из очереди отвечает PostCreatedEventHandler.
За получения ленты из базы отвечает NewsLineQueryService.
За сохранение лент в базе отвечает NewsLineStore.