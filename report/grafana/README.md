# Отчёт по домашнему заданию №12

## Описание

Так как проект развёрнут в docker-compose количество нод фактически равно 1, то для получения системных метрик использовал один zabbix-agent.
Забикс агент собирает системные метрики и отправлеят их на забикс сервер. Забикс доступен по адресу http://127.0.0.1:8081/ вход Admin/zabbix
На дашборде можно видеть различные системные метрики.
Для более красивого отображения используется дашборд в графане.
Графана использует zabbix как источник данных.
Графана доступна по адресу http://127.0.0.1:3000/ вход admin/zabbix
Для отображения бизнесовых метрик по принципу RED используется prometheus. Метрики аккумулирует приложение и передаёт их prometheus.
Для автоматического обнаружения сервисов prometheus использует consul.
Prometheus доступен по адресу http://127.0.0.1:9090/
Графрна также использует prometheus как источник данных, и отображает дашборд построенный дле сервиса сообщений.
Сервис сообщений работает через rest и grpc, поэтому метрики разделены.
grpc используется для внутриннего межсервисного взаимодействия, а rest обрабатывает пользовательские запросы.
На дашборде сервиса сообщений графики rest и grpc разделены.
Для бизнеса может быть важна информация по частоте добаления новых сообщений - это показатель использования пользователями нашей соцсети.
За это отвечает RPS, а именно метод /conversation/api/v1/message/add

Для запуска приложения нужно выполнить команды:

Поднимаем контейнеры.
```bash
docker-compose up
```

И запустить репликацию.
```bash
./start_replication.sh
```

Запустить автоматическую настройку забикса и дашборда графаны.
```bash
chmod +x ./zabbix/scripts/setup-zabbix.sh
./zabbix/scripts/setup-zabbix.sh
```

Запустить автоматическое создание дашборда графаны для прометея.
```bash
chmod +x ./prometheus/scripts/setup-prometheus.sh
./prometheus/scripts/setup-prometheus.sh
```

После чего можно зайти в графану и посмотреть дашборды Conversation и Linux Servers.
Для того, чтобы появились метрики в Prometheus необходимо зайти впереписку и написать сообщения.